Loaded cached credentials.
Loading extension: conductor
Loading extension: exa-mcp-server
Server 'exa' supports tool updates. Listening for changes...
Server 'exa' supports resource updates. Listening for changes...
(node:9550) MaxListenersExceededWarning: Possible EventTarget memory leak detected. 11 abort listeners added to [AbortSignal]. MaxListeners is 10. Use events.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
<response>
<status>success</status>
<thought>
HelloController의 hello 메서드는 'name' 파라미터를 받아 인사말을 반환하며, 파라미터가 없을 경우 'Llama'를 기본값으로 사용합니다.
이를 검증하기 위해 MockMvc와 Spring REST Docs를 사용하는 @WebMvcTest 스타일의 테스트 코드를 작성합니다.
1. @Nested 구조를 사용하여 'Describe_hello' 클래스로 그룹화합니다.
2. 파라미터가 없는 경우에 대한 기본 동작을 테스트합니다.
3. @ParameterizedTest를 사용하여 다양한 이름 입력에 대한 응답을 효율적으로 검증합니다.
4. 모든 테스트에는 .andDo(document(...))를 포함하여 API 문서를 생성하도록 구성합니다.
5. BDD 스타일(given/when/then)을 준수하며 한국어 @DisplayName을 적용합니다.
</thought>
<content>
<![CDATA[
    @Nested
    @DisplayName("hello 메서드는")
    class Describe_hello {

        @Test
        @DisplayName("name 파라미터가 제공되지 않으면 기본값인 Llama를 사용하여 인사말을 반환한다")
        void it_returns_greeting_with_default_name() throws Exception {
            // given
            final String expectedResponse = "Hello, Llama!";

            // when
            var result = mockMvc.perform(get("/hello")
                    .accept(MediaType.TEXT_PLAIN));

            // then
            result.andExpect(status().isOk())
                    .andExpect(content().string(expectedResponse))
                    .andDo(document("hello-default"));
        }

        @ParameterizedTest
        @ValueSource(strings = {"World", "Spring", "Controller"})
        @DisplayName("name 파라미터가 주어지면 해당 이름을 포함한 인사말을 반환한다")
        void it_returns_greeting_with_provided_name(String name) throws Exception {
            // given
            final String expectedResponse = String.format("Hello, %s!", name);

            // when
            var result = mockMvc.perform(get("/hello")
                    .param("name", name)
                    .accept(MediaType.TEXT_PLAIN));

            // then
            result.andExpect(status().isOk())
                    .andExpect(content().string(expectedResponse))
                    .andDo(document("hello-custom-name"));
        }
    }
]]>
</content>
</response>
